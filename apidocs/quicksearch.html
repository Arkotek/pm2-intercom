<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"global.html":{"id":"global.html","title":"Global","body":" Gridcontrol Classes APIFilesManagementGridControlLoadBalancerTaskManager Events Interplanetary#event:listening Global ActorEmitteridsisIdreplyslice Global Members Emitter Module dependencies. ids Actor ids. slice Slice ref. Methods Actor(stream) Initialize an actor for the given `Stream`. Parameters: Name Type Description stream Stream isId() ID argument. reply(id, args) Return a reply message for `id` and `args`. Parameters: Name Type Description id String args Array Returns: Type Array × Search results Close "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" Gridcontrol Classes APIFilesManagementGridControlLoadBalancerTaskManager Events Interplanetary#event:listening Global ActorEmitteridsisIdreplyslice Classes Classes API FilesManagement GridControl LoadBalancer TaskManager Events listening Interplanetary is a powerful discovery system based on discovery-swarm It link machines together in the same subnetwork via DNS multicast And over the internet via the Bittorrent Distributed Hash Table (DHT) Parameters: Name Type Description opts object options Properties Name Type Description maxConnections id string default:autogenerate unique id for host stream ?? discovery boolean default:true activate/deactivate discovery tcp boolean default:true activate/deactivate TCP connection utp boolean (disabled) activate/deactivate UTP connection dns boolean default:true activate/deactivate DNS discovery dht boolean default:true activate/deactivate DHT discovery net object Properties Name Type Description key string readable private key cert string readable public key × Search results Close "},"index.html":{"id":"index.html","title":"Index","body":" Gridcontrol Classes APIFilesManagementGridControlLoadBalancerTaskManager Events Interplanetary#event:listening Global ActorEmitteridsisIdreplyslice GridControlExecute functions and tasks in a Server Grid. Each Server will have installed a networked process manager and One master will act as the orchestrator. This modules auto-link each process manager in the same grid name and allows to execute functions in any of them, in any languages. The more GridControl you add, the more calculation power you get. Features 0 conf Auto discovery system via Bittorent DHT and DNS multicast 0 conf Connection system accross private network, wifi 0 conf Pandemic style application source sharing with dependencies and consistency checks Ecosystem: Toolbox for Grid management (grid CLI, provisioning, multissh) Fast: Grid interconnected via TCP/UTP sockets Fast: Always UP services (no spawn for each actions) Intuitive: Simple local HTTP API on each node Polyglot: Services can be wrotte in any language Compatible with Amazon Lambda, Google Cloud Functions And a lot more like Buffering, Security, Retry on Failure... And PM2 behing the scene for process management and cluster capabilities. Quick startThe Grid CLI is your main tool to control a Grid: $ npm install grid-cli -gCreate a Compute GridOn your local machine: $ grid install &lt;GRID_NAME&gt;To provision remote machines: $ grid provision &lt;USERNAME&gt; &lt;IP&gt; &lt;GRID_NAME&gt;This will SSH onto the server and will install and configure GridControl. GRID_NAME is a common identifier for each calcul units to link themselves. Provision as many server needed, then to list each units linked to the grid do: $ grid listIf you need to execute commands / install softwares in batch in each unit do: $ grid multissh &lt;COMMAND&gt;CreateNow we have to create a project with this structure: . ├── index.js ├── package.json └── tasks ├── task_1.js ├── task_2.js └── request.jsLet's look at the content of tasks/request.js: var request = require('request'); module.myHandler = function(data, cb) { request.get(data.url, function(err, res, body) { if (err) return cb(err); cb(null, { response : body }); }); };Now let's add some orchestration code into the index.js: ./index.js // Initialize and synchronize the whole grid var grid = require('gridcontrol').init({ task_folder : 'tasks' }); setInterval(function() { /** * This will invoke the function &lt;filename&gt; (here request) * in each server connected in a round robin way */ grid.dispatch('request.myHandler', { url : 'http://google.com/' }, function(err, data, server_meta) { console.log('From server %s:%s', server.name, server.ip); console.log('Got response %s', data); }); }, 1000);Start the main application: $ node index.jsDisplay each host connected to the grid: $ grid listDisplay tasks statistics: $ grid tasksProvision a new node: $ grid provision ubuntu@10.31.22.15 &lt;grid-name&gt; [square-name]Each gridcontrol linked to the same grid will connect each other. Discovery is made through DNS multicast and DHT Bittorent. To display cloud functions logs do $ pm2 logs gridcontrol CommandsList tasks currently managed: $ pm2 lsMonitor tasks memory/cpu consumption: $ pm2 monitDisplay logs: $ pm2 logs &lt;task-name&gt;tests$ npm testAPI Doc$ google-chrome docs/index.htmlDiscovery expanations$ NS=namespace PASS=access_password pm2 restart cloud-discoveryIf NS is set it will activate the DNS Multicast discovery. If NS and PASS is set, the DNS Multicast and DHT Bittorent discovery will be enabled. LicenseApache V2 (see LICENSE.txt) # Overview (old doc)# Cloud FunctionA cloud function is a simple script that will be executed over the network and will return a result to the calling script. Example: module.exports = function(context, cb) { request(context.data.url, function (err, res, body) { if (error) return cb(error); return cb(null, body); }); };Automatic discoveryEach PM2 in the same subnet will auto discover themseleves via DNS multicast. Files &amp; Env synchronizationThe working directory will be automatically synchronized over the network. One PM2 is the &quot;file master&quot; and all other peers will synchronize with these files. The node_modules folder is also included on file broadcast. Data is transfered via a gziped tarball. Lambda managementPM2 is behind the scene to manage and cluster (if JS apps) tasks. Lambda in another languageTo write a lambda in another language, you just need to create a HTTP server listening on port TASK_PORT on route / and returning the value needed: Python: #!/usr/bin/python from BaseHTTPServer import BaseHTTPRequestHandler,HTTPServer import os PORT_NUMBER = int(os.environ['TASK_PORT']) class myHandler(BaseHTTPRequestHandler): #Handler for the GET requests def do_GET(self): self.send_response(200) self.send_header('Content-type','text/data') self.end_headers() self.wfile.write(&quot;Hello World !&quot;) return server = HTTPServer(('', PORT_NUMBER), myHandler) server.serve_forever() Index api.js Expose API to CloudFunctions Author: Alexandre Strzelewicz × Search results Close "},"API.html":{"id":"API.html","title":"Class: API","body":" Gridcontrol Classes APIFilesManagementGridControlLoadBalancerTaskManager Events Interplanetary#event:listening Global ActorEmitteridsisIdreplyslice Class: API API new API(opts) Set API default values This: {API} Parameters: Name Type Description opts object options Properties Name Type Description port Port to listen on task_manager Task manager object file_manager File manager object file_manager Network manager (cloudfunctions.js) object tls TLS keys Methods close() Stop API + Terminate Task manager mountRoutes() Mount API routes setMiddlewares() Set Express middlewares (JSON parsing, Attach class to req) start() Start API and listen to port × Search results Close "},"FilesManagement.html":{"id":"FilesManagement.html","title":"Class: FilesManagement","body":" Gridcontrol Classes APIFilesManagementGridControlLoadBalancerTaskManager Events Interplanetary#event:listening Global ActorEmitteridsisIdreplyslice Class: FilesManagement FilesManagement new FilesManagement(opts) File manager, takes care of sync files Parameters: Name Type Description opts object options Properties Name Type Description dest_file String Port to start on Methods clear() Clear all temporary folder/files prepareSync() Function called by File Master Called via task_controller on init_task_group synchronize() Download + Unzip tarball from target IP (for slave to synchronize with file master) × Search results Close "},"GridControl.html":{"id":"GridControl.html","title":"Class: GridControl","body":" Gridcontrol Classes APIFilesManagementGridControlLoadBalancerTaskManager Events Interplanetary#event:listening Global ActorEmitteridsisIdreplyslice Class: GridControl GridControl new GridControl(opts, cb) Main entry point of GridControl This: {GridControl} Parameters: Name Type Description opts object options Properties Name Type Description peer_name string host name namespace string grid name for discovery peer_api_port integer API port (then task p+1++) file_manager object default location of sync data Properties Name Type Description dest_file string default location of sync data dest_folder string default location of sync data is_file_master string default location of sync data has_file_to_sync string default location of sync data tmp_folder string default location of folder uncomp task_manager object default location of sync data task_meta object default location of sync data Properties Name Type Description instances integer default location of sync data json_conf object default location of sync data task_folder string default location of sync data env object default location of sync data cb function callback Members &lt;inner&gt; file_manager_opts File manager initialization &lt;inner&gt; task_manager_opts Task manager initialization Methods askAllPeersToSync() Send command to all peers to synchronize askPeerToSync(sock) Send synchronize command to target sock Parameters: Name Type Description sock object socket obj close() Stop everything (api, discovery, socket pool, task manager, file manager) getRouters() Return peers connected onNewPeer(sock) Handle peer when connected Parameters: Name Type Description sock object socket object serialize() Serialize whole Grid control for later restore Just pass back this objet to Gridcontrol constructor to rebuild start() Start Grid control startDiscovery(ns) Start network discovery Parameters: Name Type Description ns string namespace for discovery × Search results Close "},"LoadBalancer.html":{"id":"LoadBalancer.html","title":"Class: LoadBalancer","body":" Gridcontrol Classes APIFilesManagementGridControlLoadBalancerTaskManager Events Interplanetary#event:listening Global ActorEmitteridsisIdreplyslice Class: LoadBalancer LoadBalancer new LoadBalancer(opts) Load balancer Parameters: Name Type Description opts object options Properties Name Type Description task_manager object task manager object net_manager object net manager object local_loop boolean should the LB proxy query to local? × Search results Close "},"TaskManager.html":{"id":"TaskManager.html","title":"Class: TaskManager","body":" Gridcontrol Classes APIFilesManagementGridControlLoadBalancerTaskManager Events Interplanetary#event:listening Global ActorEmitteridsisIdreplyslice Class: TaskManager TaskManager new TaskManager(opts) The Task Manager manage all tasks Parameters: Name Type Description opts object options Properties Name Type Description port_offset Integer Port to start on Methods getAllTasksInFolder(tasks_fullpath, cb) Get files in target folder Parameters: Name Type Description tasks_fullpath string Absolute path to list files cb function callback called once files are listed initTaskGroup(opts) List all tasks and .startTasks each of them Parameters: Name Type Description opts object options Properties Name Type Description base_folder string ABSOLUTE project path task_folder string RELATIVE task folder path instances string number of instances of each script json_conf string NIY setTaskMeta(task_meta) Set Task default meta Parameters: Name Type Description task_meta Object startTasks(opts, tasks_files, cb) Start a list of task_files Parameters: Name Type Description opts object options Properties Name Type Description base_folder string absolute project path task_folder string absolute task folder path instances string number of instances of each script json_conf string NIY tasks_files array array of files (tasks) cb function callback triggered once application started triggerTask(opts) Trigger a task Parameters: Name Type Description opts object options Properties Name Type Description task_data string data to be passed to function task_id string full string of the function to call (script name + handle) task_opts object options about function execution (e.g. timeout) × Search results Close "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
